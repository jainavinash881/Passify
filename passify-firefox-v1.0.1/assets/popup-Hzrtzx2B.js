import{r as a,P as w,c as R,j as s,g as F,R as I,a as W}from"./liquidGlass-CEzRsJvQ.js";const o=typeof browser<"u"?browser:chrome;function U(){const[r,x]=a.useState(""),[c,i]=a.useState("medium"),[d,v]=a.useState([]),[j,b]=a.useState(!1),[N,u]=a.useState(!1),[y,f]=a.useState(""),[h,m]=a.useState(""),[S,p]=a.useState(!1),l=a.useCallback(async()=>{const e=await w.getAll();v(e)},[]),g=a.useCallback(async()=>{try{const[e]=await o.tabs.query({active:!0,currentWindow:!0});if(e.url){const t=new URL(e.url);f(t.hostname)}}catch(e){console.error("Error getting current website:",e)}},[]);a.useEffect(()=>{l(),g()},[l,g]);const C=()=>{const e=F(c);x(e),u(!1)},k=async()=>{try{await navigator.clipboard.writeText(r),u(!0),setTimeout(()=>u(!1),2e3)}catch(e){console.error("Error copying password:",e)}},P=async()=>{if(!(!r||!h))try{await w.save({website:y,username:h,password:r}),await l(),p(!1),m("")}catch(e){console.error("Error saving password:",e)}},E=async e=>{try{await w.delete(e),await l()}catch(t){console.error("Error deleting password:",t)}},M=async e=>{try{if(window.self!==window.top)window.parent.postMessage({type:"PASSIFY_AUTOFILL",username:e.username,password:e.password},"*");else{const[t]=await o.tabs.query({active:!0,currentWindow:!0});t.id&&await o.tabs.sendMessage(t.id,{action:"autofill",username:e.username,password:e.password})}}catch(t){console.error("Error autofilling password:",t)}},n=r?R(r):null,A=()=>{window.self!==window.top?window.parent.postMessage({type:"PASSIFY_OPEN_MANAGER"},"*"):o.tabs.create({url:o.runtime.getURL("manager.html")})};return s.jsxs("div",{className:"popup-container",children:[s.jsxs("div",{className:"popup-header glass-container",children:[s.jsx("h1",{className:"popup-title",children:"ğŸ” Passify"}),s.jsx("p",{className:"popup-subtitle",children:"Secure Password Manager"})]}),s.jsx("div",{className:"popup-content",children:j?s.jsxs("div",{className:"glass-container fade-in",children:[s.jsxs("div",{className:"saved-header",children:[s.jsx("h2",{className:"section-title",children:"Saved Passwords"}),s.jsx("button",{className:"glass-button",onClick:()=>b(!1),children:"â† Back"})]}),s.jsx("div",{className:"saved-list",children:d.length===0?s.jsx("p",{className:"empty-message",children:"No saved passwords yet"}):d.map(e=>s.jsxs("div",{className:"glass-card saved-item",children:[s.jsxs("div",{className:"saved-info",children:[s.jsxs("div",{className:"saved-website",children:["ğŸŒ ",e.website]}),s.jsxs("div",{className:"saved-username",children:["ğŸ‘¤ ",e.username]}),s.jsx("div",{className:"saved-password",children:s.jsx("code",{children:"â€¢".repeat(12)})})]}),s.jsxs("div",{className:"saved-actions",children:[s.jsx("button",{className:"glass-button primary",onClick:()=>M(e),children:"âš¡ Autofill"}),s.jsx("button",{className:"glass-button",onClick:async()=>{await navigator.clipboard.writeText(e.password)},children:"ğŸ“‹"}),s.jsx("button",{className:"glass-button",onClick:()=>E(e.id),style:{background:"rgba(239, 68, 68, 0.2)"},children:"ğŸ—‘ï¸"})]})]},e.id))})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"glass-container fade-in",children:[s.jsx("h2",{className:"section-title",children:"Generate Password"}),s.jsxs("div",{className:"strength-selector",children:[s.jsx("button",{className:`glass-button ${c==="easy"?"primary":""}`,onClick:()=>i("easy"),children:"Easy (8 chars)"}),s.jsx("button",{className:`glass-button ${c==="medium"?"primary":""}`,onClick:()=>i("medium"),children:"Medium (12 chars)"}),s.jsx("button",{className:`glass-button ${c==="hard"?"primary":""}`,onClick:()=>i("hard"),children:"Hard (16 chars)"})]}),s.jsx("button",{className:"glass-button primary generate-btn",onClick:C,children:"âš¡ Generate Password"}),r&&s.jsxs("div",{className:"password-display fade-in",children:[s.jsxs("div",{className:"password-box glass-container",children:[s.jsx("code",{className:"password-text",children:r}),s.jsx("button",{className:"glass-button copy-btn",onClick:k,children:N?"âœ“ Copied!":"ğŸ“‹ Copy"})]}),n&&s.jsxs("div",{className:"strength-info",children:[s.jsxs("div",{className:"strength-label",children:[s.jsx("span",{children:"Strength: "}),s.jsx("span",{style:{color:n.color,fontWeight:"bold"},children:n.label})]}),s.jsx("div",{className:"strength-indicator",children:s.jsx("div",{className:"strength-bar",style:{width:`${n.score}%`,background:n.color}})})]}),S?s.jsxs("div",{className:"save-form fade-in",children:[s.jsx("input",{type:"text",className:"glass-input",placeholder:"Username or Email",value:h,onChange:e=>m(e.target.value)}),s.jsxs("div",{className:"save-form-buttons",children:[s.jsx("button",{className:"glass-button primary",onClick:P,children:"Save"}),s.jsx("button",{className:"glass-button",onClick:()=>{p(!1),m("")},children:"Cancel"})]})]}):s.jsx("button",{className:"glass-button secondary save-btn",onClick:()=>p(!0),children:"ğŸ’¾ Save Password"})]})]}),s.jsxs("div",{className:"quick-actions",children:[s.jsxs("button",{className:"glass-button view-saved-btn",onClick:()=>b(!0),children:["ğŸ“š View Saved (",d.length,")"]}),s.jsx("button",{className:"glass-button secondary view-saved-btn",onClick:A,children:"ğŸ”“ Open Password Manager"})]})]})}),s.jsx("div",{className:"popup-footer",children:s.jsx("p",{className:"footer-text",children:"Made with â¤ï¸ by Avinash"})})]})}I.createRoot(document.getElementById("root")).render(s.jsx(W.StrictMode,{children:s.jsx(U,{})}));

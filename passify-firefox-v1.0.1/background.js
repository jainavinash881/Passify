const e=typeof browser<"u"?browser:chrome;e.runtime.onInstalled.addListener(()=>{console.log("Passify extension installed")});e.runtime.onMessage.addListener((r,n,t)=>{if(r.action==="openPopup")t({success:!0});else{if(r.action==="openPopupTab")return e.tabs.create({url:e.runtime.getURL("popup.html"),active:!0}).then(()=>{t({success:!0})}).catch(o=>{console.error("Error opening popup tab:",o),t({success:!1,error:o.message})}),!0;if(r.action==="openManager")return e.tabs.create({url:e.runtime.getURL("manager.html"),active:!0}).then(()=>{t({success:!0})}).catch(o=>{console.error("Error opening manager:",o),t({success:!1,error:o.message})}),!0}return!0});e.commands?.onCommand.addListener(r=>{r==="generate-password"&&(typeof browser<"u"?e.tabs.create({url:e.runtime.getURL("popup.html"),active:!0}):e.action.openPopup())});console.log("Passify background script loaded");
